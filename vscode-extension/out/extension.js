(()=>{"use strict";var t={265:function(t,o,e){var r,n=this&&this.__createBinding||(Object.create?function(t,o,e,r){void 0===r&&(r=e);var n=Object.getOwnPropertyDescriptor(o,e);n&&!("get"in n?!o.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return o[e]}}),Object.defineProperty(t,r,n)}:function(t,o,e,r){void 0===r&&(r=e),t[r]=o[e]}),s=this&&this.__setModuleDefault||(Object.create?function(t,o){Object.defineProperty(t,"default",{enumerable:!0,value:o})}:function(t,o){t.default=o}),i=this&&this.__importStar||(r=function(t){return r=Object.getOwnPropertyNames||function(t){var o=[];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o[o.length]=e);return o},r(t)},function(t){if(t&&t.__esModule)return t;var o={};if(null!=t)for(var e=r(t),i=0;i<e.length;i++)"default"!==e[i]&&n(o,t,e[i]);return s(o,t),o});Object.defineProperty(o,"__esModule",{value:!0}),o.activate=function(t){d=t,l=a.window.createStatusBarItem(a.StatusBarAlignment.Left,100),l.command="apiCostGuard.showStatus",t.subscriptions.push(l),[a.commands.registerCommand("apiCostGuard.showStatus",()=>{g()?(p||(p=a.window.createTerminal({name:"API Cost Guard",shellPath:"win32"===process.platform?"cmd.exe":"bash"}),d.subscriptions.push(p)),p.sendText("api-cost status\n"),p.show()):a.window.showErrorMessage("API Cost Guard not found. Please install it first: npm install -g api-cost-guard")}),a.commands.registerCommand("apiCostGuard.startMonitoring",()=>{g()?m?a.window.showInformationMessage("Monitoring is already running"):(p||(p=a.window.createTerminal({name:"API Cost Monitor",shellPath:"win32"===process.platform?"cmd.exe":"bash"}),d.subscriptions.push(p)),p.sendText("api-cost monitor\n"),p.show(),m=setInterval(()=>{f()},3e4),a.window.showInformationMessage("API Cost monitoring started in terminal")):a.window.showErrorMessage("API Cost Guard not found. Please install it first: npm install -g api-cost-guard")}),a.commands.registerCommand("apiCostGuard.stopMonitoring",()=>(m&&(clearInterval(m),m=null),p&&(p.sendText(""),p.dispose(),p=null),void a.window.showInformationMessage("API Cost monitoring stopped"))),a.commands.registerCommand("apiCostGuard.showSettings",()=>function(){a.workspace.getConfiguration("apiCostGuard");const t=a.Uri.file(c.join(e(857).homedir(),".api-cost","config.json"));a.workspace.openTextDocument(t).then(t=>{t?a.window.showTextDocument(t):a.window.showInformationMessage('Config file not found. Run "api-cost init" to create one.')})}())].forEach(o=>t.subscriptions.push(o)),f();const o=setInterval(f,12e4);t.subscriptions.push({dispose:()=>clearInterval(o)});const r=a.workspace.createFileSystemWatcher("**/package.json");t.subscriptions.push(r.onDidChange(()=>{f()}))},o.deactivate=function(){m&&clearInterval(m),p&&p.dispose()};const a=i(e(398)),c=i(e(928)),u=i(e(896));let l,d,p=null,m=null;function f(){if(!a.workspace.getConfiguration("apiCostGuard").get("apiKey"))return l.text="$(graph) Not Configured",l.tooltip="API Cost Guard: Configure API key to start monitoring",void(l.color=new a.ThemeColor("editorError.foreground"));try{const t=g();if(t){const{execSync:o}=e(317),r=o(`${t} status --json`,{encoding:"utf8",stdio:"pipe"}),n=JSON.parse(r);n.totalCost>0?(l.text=`$${n.totalCost.toFixed(2)}`,l.tooltip=`API Cost Guard: $${n.totalCost.toFixed(2)} spent this month (${n.budgetUsed.toFixed(1)}% of budget)`,n.budgetUsed>=90?l.color=new a.ThemeColor("minimap.errorHighlight"):n.budgetUsed>=70?l.color=new a.ThemeColor("minimap.warningHighlight"):l.color=new a.ThemeColor("editor.foreground")):(l.text="$0.00",l.tooltip="API Cost Guard: No usage recorded yet",l.color=new a.ThemeColor("editor.foreground"))}}catch(t){l.text="$(error) Error",l.tooltip="API Cost Guard: Failed to fetch status",l.color=new a.ThemeColor("minimap.errorHighlight")}}function g(){const t=["/usr/local/bin/api-cost","/opt/homebrew/bin/api-cost",c.join(process.env.HOME||"",".npm-global/bin/api-cost")];for(const o of t)try{return u.accessSync(o,u.constants.X_OK),o}catch{continue}return null}},317:t=>{t.exports=require("child_process")},398:t=>{t.exports=require("vscode")},857:t=>{t.exports=require("os")},896:t=>{t.exports=require("fs")},928:t=>{t.exports=require("path")}},o={},e=function e(r){var n=o[r];if(void 0!==n)return n.exports;var s=o[r]={exports:{}};return t[r].call(s.exports,s,s.exports,e),s.exports}(265);module.exports=e})();